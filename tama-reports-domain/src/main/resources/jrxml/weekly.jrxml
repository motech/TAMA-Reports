<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="weekly" pageWidth="12640" pageHeight="7200" columnWidth="12600" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b816333a-bc2e-4e97-9ace-98c5283c0024">
   <property name="ireport.zoom" value="1.0" />
   <property name="ireport.x" value="10673" />
   <property name="ireport.y" value="0" />
   <property name="net.sf.jasperreports.print.keep.full.text" value="true" />
   <property name="net.sf.jasperreports.text.truncate.at.char" value="true" />
   <style name="table">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 1">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 2">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 3">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 4">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 5">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 6">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 6_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 6_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 6_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 7">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 7_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 7_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 7_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 8">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 8_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 8_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 8_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 9">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 9_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 9_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 9_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 10">
      <box>
         <pen lineWidth="1.0" lineColor="#000000" />
      </box>
   </style>
   <style name="table 10_TH" mode="Opaque" backcolor="#F0F8FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 10_CH" mode="Opaque" backcolor="#BFE1FF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <style name="table 10_TD" mode="Opaque" backcolor="#FFFFFF">
      <box>
         <pen lineWidth="0.5" lineColor="#000000" />
      </box>
   </style>
   <subDataset name="Weekly" uuid="b0056990-caaf-4647-ad3a-29b51ae144d3">
      <parameter name="PATIENT_ID" class="java.lang.String" />
      <parameter name="CLINIC_ID" class="java.lang.String" />
      <parameter name="START_DATE" class="java.lang.String" />
      <parameter name="END_DATE" class="java.lang.String" />
      <queryString><![CDATA[SELECT a.patient_id,
                                a.patient_document_id,
                                b.clinic_name,
                                c.art_start_date,
                                c.treatmentAdviceId,
                                c.start_date,
                                c.week_start_date,
                                c.adherence_reported_on,
                                c.no_of_doses_missed

                                FROM tama_reports.patient a,
                              tama_reports.clinic b,
                              tama_reports.weeklyAdherenceLog c
                         WHERE c.patient_document_id = a.patient_document_id
                           AND a.clinic_id = b.clinic_id
                           AND b.clinic_id LIKE $P{CLINIC_ID}
                           AND a.patient_id LIKE $P{PATIENT_ID}
                           AND ($P{START_DATE} = ''
                                OR a.registered_on >= to_date($P{START_DATE},'dd/MM/yyyy'))
                           AND ($P{END_DATE} = ''
                                OR a.registered_on <= to_date($P{END_DATE},'dd/MM/yyyy'))
                         ORDER BY (b.clinic_name,
                                   a.patient_id);]]></queryString>
      <field name="patient_id" class="java.lang.String" />
      <field name="patient_document_id" class="java.lang.String" />
      <field name="clinic_Name" class="java.lang.String" />
      <field name="art_start_date" class="java.lang.String" />
      <field name="treatmentAdviceId" class="java.lang.String" />
      <field name="start_date" class="java.lang.String" />
      <field name="week_start_date" class="java.lang.String" />
      <field name="adherence_reported_on" class="java.lang.String" />
      <field name="no_of_doses_missed" class="java.lang.String" />
   </subDataset>
   <parameter name="PATIENT_ID" class="java.lang.String" />
   <parameter name="CLINIC_ID" class="java.lang.String" />
   <parameter name="START_DATE" class="java.lang.String" />
   <parameter name="END_DATE" class="java.lang.String" />
   <queryString language="SQL"><![CDATA[select 1 as dummy;]]></queryString>
   <background>
      <band splitType="Stretch" />
   </background>
   <pageHeader>
      <band height="80" splitType="Stretch">
         <textField pattern="dd/MM/yyyy">
            <reportElement uuid="4a33bccb-2a39-4804-a8cb-f2d8e88269b1" x="150" y="20" width="150" height="20" />
            <textElement />
            <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
         </textField>
         <staticText>
            <reportElement uuid="fe798db9-47aa-49f9-ad9b-1ca69ee6b744" x="0" y="0" width="150" height="20" />
            <textElement />
            <text><![CDATA[Weekly Adherence Report]]></text>
         </staticText>
         <staticText>
            <reportElement uuid="fe798db9-47aa-49f9-ad9b-1ca69ee6b744" x="0" y="20" width="150" height="20" />
            <textElement />
            <text><![CDATA[Date]]></text>
         </staticText>
      </band>
   </pageHeader>
   <summary>
      <band height="168" splitType="Stretch">
         <componentElement>
            <reportElement uuid="b2bc5efb-689e-4aff-84b5-eb3bb61e272f" key="table 1" style="table 1" x="0" y="0" width="12450" height="168" />
            <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
               <datasetRun subDataset="Weekly" uuid="cf3f1d81-55d9-4ebf-97d9-fa36722ee035">
                  <datasetParameter name="PATIENT_ID">
                     <datasetParameterExpression><![CDATA[$P{PATIENT_ID}]]></datasetParameterExpression>
                  </datasetParameter>
                  <datasetParameter name="CLINIC_ID">
                     <datasetParameterExpression><![CDATA[$P{CLINIC_ID}]]></datasetParameterExpression>
                  </datasetParameter>
                  <datasetParameter name="START_DATE">
                     <datasetParameterExpression><![CDATA[$P{START_DATE}]]></datasetParameterExpression>
                  </datasetParameter>
                  <datasetParameter name="END_DATE">
                     <datasetParameterExpression><![CDATA[$P{END_DATE}]]></datasetParameterExpression>
                  </datasetParameter>
                  <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
               </datasetRun>
               <jr:columnGroup width="150" uuid="42512891-c732-45f7-962c-3fa76962b95a">
                    <jr:columnHeader style="table 2_CH" height="30" rowSpan="1">
                       <staticText>
                         <reportElement uuid="9228da0a-1ed0-4791-b637-35f28c08d209" mode="Transparent" x="0" y="0" width="90" height="30" forecolor="#000000" backcolor="#FFFFFF"/>
                         <textElement textAlignment="Center" verticalAlignment="Middle" rotation="None" markup="none">
                    	  <font fontName="SansSerif" size="12" isBold="true" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
                          <paragraph lineSpacing="Single"/>
                         </textElement>
                         <text><![CDATA[Patient ID]]></text>
                    	</staticText>
                    </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="0be7096c-b400-40f5-b527-5b91bcf49dea" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{patient_id}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42511891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae7b">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[Clinic Name]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{clinic_Name}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42510891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae7c">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[ART Start Date (DD/MM/YYYY)]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{art_start_date}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42599891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae7d">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[Treatment Advice]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{treatmentAdviceId}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42598891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae7e">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[Start Date (DD/MM/YYYY)]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{start_date}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42597891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae7f">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[Week Start Date (DD/MM/YYYY)]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{week_start_date}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42596891-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae72">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[Adherence Reported On Date (DD/MM/YYYY)]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{adherence_reported_on}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                      </jr:columnGroup>
                     <jr:columnGroup width="150" uuid="42596991-c732-45f7-962c-3fa76962b95a">
                      <jr:column width="150" uuid="4951be05-0710-4478-b900-fd4c1e8dae76">
                        <jr:columnHeader style="table 1_CH" height="33" rowSpan="1">
                           <staticText>
                              <reportElement uuid="b04c7dbc-8e3b-4c93-a224-29e043afa7b4" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <text><![CDATA[No of Doses Missed]]></text>
                           </staticText>
                        </jr:columnHeader>
                        <jr:detailCell style="table 1_TD" height="33" rowSpan="1">
                           <textField isBlankWhenNull="true">
                              <reportElement uuid="c53d9733-de41-4b85-b425-efbcc43e7949" x="0" y="0" width="150" height="33" />
                              <textElement />
                              <textFieldExpression><![CDATA[$F{no_of_doses_missed}]]></textFieldExpression>
                           </textField>
                        </jr:detailCell>
                     </jr:column>
                  </jr:columnGroup>

            </jr:table>
         </componentElement>
      </band>
   </summary>
</jasperReport>